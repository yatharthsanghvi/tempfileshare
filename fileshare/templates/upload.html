{% extends "base.html" %}

{% block title %}Upload - Temporary File Sharing{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <h1 class="mb-4">Upload Files</h1>
        <p class="lead">Files will be automatically deleted after the specified time (max 60 minutes).</p>
        <form method="post" enctype="multipart/form-data" id="uploadForm">
            <div class="mb-3">
                <label for="file" class="form-label">Select files:</label>
                <input type="file" class="form-control" id="file" name="file" multiple required>
                <div class="invalid-feedback">Please select at least one file to upload.</div>
            </div>
            <div class="mb-3">
                <label for="delete_after" class="form-label">Delete after (minutes, max 60):</label>
                <input type="number" class="form-control" id="delete_after" name="delete_after" min="1" max="60" value="60" required>
                <div class="invalid-feedback">Please enter a valid time between 1 and 60 minutes.</div>
            </div>
            <button type="submit" class="btn btn-primary shadow-lg">Upload</button>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.getElementById('uploadForm').addEventListener('submit', function(event) {
        var fileInput = document.getElementById('file');
        var deleteAfter = document.getElementById('delete_after');
        
        if (fileInput.files.length === 0) {
            fileInput.classList.add('is-invalid');
            event.preventDefault();
        } else {
            fileInput.classList.remove('is-invalid');
        }

        var deleteTime = parseInt(deleteAfter.value);
        if (isNaN(deleteTime) || deleteTime < 1 || deleteTime > 60) {
            deleteAfter.classList.add('is-invalid');
            event.preventDefault();
        } else {
            deleteAfter.classList.remove('is-invalid');
        }
    });
</script>
{% endblock %}
